<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:head>
	<title>Demo CA Consume</title>
</h:head>
<f:event type="preRenderView" value="#{authorizeCodeBean.performTakeToken()}" />
<h:body>
	<f:view>
		<f:metadata>
			<f:viewParam name="code" value="#{authorizeCodeBean.authCode}"/>
			<f:viewParam name="state" value="#{authorizeCodeBean.stateEncoded}"/>
		</f:metadata>
	</f:view>
	<c:set var="returnUrl" value="#{authorizeCodeBean.returnUrl}" />
	<c:set var="followParams" value="#{authorizeCodeBean.followParams}" />
	<form id="mainform" action="${returnUrl}" method="get">
		<c:forEach var="param" items="followParams">
			<input type="text" name="${param.name}" value="${param.value}"/>
		</c:forEach>
	</form>
</h:body>
<script language="javascript">
var e = document.getElementById("mainform");
e.submit();
</script>
</html>